(this.webpackJsonpscrabble_react=this.webpackJsonpscrabble_react||[]).push([[0],{30:function(e,t,a){},31:function(e,t,a){},47:function(e,t,a){e.exports=a(80)},52:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),o=a(17),s=(a(52),a(2)),i=a(3),c=a(4),u=a(6),m=a(5),d=a(28),h=a(8),p=(a(30),{en:{language:"English",scores:{a:1,e:1,i:1,o:1,u:1,l:1,n:1,r:1,s:1,t:1,d:2,g:2,b:3,c:3,m:3,p:3,f:4,h:4,v:4,w:4,y:4,k:5,j:8,x:8,q:10,z:10}},fr:{language:"French",scores:{e:1,a:1,i:1,n:1,o:1,r:1,s:1,t:1,u:1,l:1,d:2,m:2,g:2,b:3,c:3,p:3,f:4,h:4,v:4,j:8,q:8,k:10,w:10,x:10,y:10,z:10}},ru:{language:"Russian",scores:{"\u043e":1,"\u0430":1,"\u0435":1,"\u0438":1,"\u043d":1,"\u0440":1,"\u0441":1,"\u0442":1,"\u0432":1,"\u0434":2,"\u043a":2,"\u043b":2,"\u043f":2,"\u0443":2,"\u043c":2,"\u0431":3,"\u0433":3,"\u044c":3,"\u044f":3,"\u0451":3,"\u044b":4,"\u0439":4,"\u0437":5,"\u0436":5,"\u0445":5,"\u0446":5,"\u0447":5,"\u0448":8,"\u044d":8,"\u044e":8,"\u0444":10,"\u0449":10,"\u044a":10}}});function f(e,t,a){for(var n=e.slice(0,t);n.length<t;)n.push(a);return n}function g(e,t){return 0===e.length?[t]:e[0]===t?[]:[t]}function v(e,t){var a=e.filter((function(e){return"blank"===e||"placed"===e})),n=e.filter((function(e){return"blank"!==e&&"placed"!==e}));return"blank"===t||"placed"===t?a=g(a,t):n=g(n,t),[].concat(Object(h.a)(a),Object(h.a)(n))}function b(e,t,a){var n=0;return e.split("").forEach((function(e,r){for(var l=p[a].scores[e.toLowerCase()],o=0;o<t[r].length;o++)switch(t[r][o]){case"blank":l*=0;break;case"double-letter":l*=2;break;case"triple-letter":l*=3}n+=l})),t.forEach((function(e){for(var t=0;t<e.length;t++)switch(e[t]){case"double-word":n*=2;break;case"triple-word":n*=3}})),n}function y(e,t,a){var n=0;return e.split("").forEach((function(e,r){var l=p[a].scores[e.toLowerCase()];t[r].includes("placed")&&(n+=l)})),n}function E(e){var t=e.modifiers.map((function(e,t){return 0===e.length?null:"".concat(t,":").concat(e.join())})).filter((function(e){return!!e})).join(", ");return t?"".concat(e.value," (").concat(t,")"):e.value}function N(e){var t,a=function(t){if(t.isPassed(e))return"PASS";var a=t.words.map((function(e){return e.value})).join("+");return t.bingo?"".concat(a," BINGO"):a},r=e.playersTurns.map((function(e){return e.map(a).join(",")})),l=e.playersTurns.map((function(t,a){return e.getTotalScore(a)})),o=e.playersTurns[0].length-1,s=(new Date).getTime();return{turns:r,scores:l,numTurns:o,durationMins:n?(t=s-n,Math.floor(t/6e4)):void 0}}function k(){document.getElementsByTagName("body")[0].scrollIntoView(!0)}function w(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function O(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):null}function T(e){window.localStorage.removeItem(e)}var S=function(e){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("img",{id:"big-logo",src:"logo.png",alt:"Scrabble score logo"}))),l.a.createElement("div",{className:"mb-5"},e.children))},C=function(){return l.a.createElement("svg",{width:"34",height:"24",viewBox:"0 0 34 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M9 4V20M9 4L15 10M9 4L3 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.a.createElement("path",{d:"M25 20L25 4M25 20L19 14M25 20L31 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChangeOfName=n.handleChangeOfName.bind(Object(c.a)(n)),n.handleChangeOfLanguage=n.handleChangeOfLanguage.bind(Object(c.a)(n)),n.handleGameStart=n.handleGameStart.bind(Object(c.a)(n)),n.state={playerNames:f([],4,""),language:"en",isTagDisabled:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=(O("settings")||this.state).playerNames;e=f(e,4,""),this.setState({playerNames:e,isTagDisabled:"ReactSnap"===navigator.userAgent})}},{key:"handleChangeOfName",value:function(e,t){var a=this.state.playerNames;(a=a.slice())[e]=t.target.value,this.setState({playerNames:a})}},{key:"handleSwapName",value:function(e,t){var a=this.state.playerNames,n=[(a=a.slice())[t],a[e]];a[e]=n[0],a[t]=n[1],this.setState({playerNames:a})}},{key:"handleChangeOfLanguage",value:function(e){this.setState({language:e.target.value})}},{key:"handleGameStart",value:function(e){var t=this.state,a=t.playerNames,r=t.language,l=this.props.onGameStart;e.preventDefault();a=a.map((function(e){return e.trim()})),w("settings",{playerNames:a=a.reverse().reduce((function(e,t){return t||e.length>0?[].concat(Object(h.a)(e),[t]):e}),[]).reverse()}),a.length<2&&(a=f(a,2,"")),l(a.map((function(e,t){return e||"Player ".concat(t+1)})),r),n=(new Date).getTime()}},{key:"render",value:function(){var e=this,t=this.state,a=t.playerNames,n=t.isTagDisabled,r=t.language;return l.a.createElement(S,null,l.a.createElement("div",{className:"language-choice-container"},l.a.createElement("p",{className:"sel-lang"},"Select the game language:"),l.a.createElement("select",{className:"custom-select",id:"language-select",value:r,onChange:this.handleChangeOfLanguage},l.a.createElement("option",{value:"en"},"English"),l.a.createElement("option",{value:"ru"},"Russian"),l.a.createElement("option",{value:"fr"},"French"))),l.a.createElement("form",{onSubmit:this.handleGameStart},l.a.createElement("div",{className:"player-names-choice-container"},a.map((function(t,r){return l.a.createElement("div",{key:r,className:"d-flex align-items-center"},l.a.createElement("input",{onChange:function(t){return e.handleChangeOfName(r,t)},value:t,className:"form-control player-name flex-grow-1",placeholder:"Player ".concat(r+1),disabled:n}),l.a.createElement("div",{className:"ml-2"},l.a.createElement("button",{type:"button",onClick:function(){return e.handleSwapName(r,r+1)},disabled:r===a.length-1||n,className:"btn disabled:hidden translate-y-swap-button"},l.a.createElement(C,null))))}))),l.a.createElement("div",{className:"start-btn-container"},l.a.createElement("button",{className:"btn start",type:"submit",disabled:n},"START"))))}}]),a}(l.a.Component),G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.onResume;return l.a.createElement(S,null,l.a.createElement("div",{className:"row justify-content-around"},l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("div",{className:"should-resume"},l.a.createElement("p",null,"You have a game in progress. ",l.a.createElement("br",null),"Would you like to resume it?"),l.a.createElement("div",{className:"buttons"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn faded",type:"button",onClick:function(){return e(!1)}},"No")),l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn",type:"button",onClick:function(){return e(!0)}},"Yes"))))))))}}]),a}(l.a.Component),P=a(9),x=a(19),L=a(12),I=function(){function e(t,a){Object(s.a)(this,e),this.words=t,this.bingo=a}return Object(i.a)(e,[{key:"isEmpty",value:function(){return 0===this.words.length}},{key:"isPassed",value:function(e){return this.isEmpty()&&this!==e.getCurrentTurn()}},{key:"isComplete",value:function(e){return this!==e.getCurrentTurn()}},{key:"score",get:function(){for(var e=0,t=0;t<this.words.length;t++)e+=this.words[t].score;return this.bingo&&(e+=50),e}}],[{key:"empty",value:function(){return new e([],!1)}},{key:"fromPlain",value:function(t){return new e(t.words,t.bingo)}}]),e}(),W=function(){function e(t,a,n){Object(s.a)(this,e),this.currentPlayerIndex=a,this.playersTurns=t,this.leftOversTurnNumber=n}return Object(i.a)(e,[{key:"addWord",value:function(e){var t=this.getCurrentTurn(),a=new I([].concat(Object(h.a)(t.words),[e]),t.bingo);return this._setTurn(this.currentPlayerIndex,this.getCurrentTurnNumber(),a)}},{key:"endTurn",value:function(){var t=this;this.getCurrentTurn().isEmpty()&&(t=this._setTurn(this.currentPlayerIndex,this.getCurrentTurnNumber(),I.empty()));var a=(this.currentPlayerIndex+1)%this.playersTurns.length;return new e(t.playersTurns.map((function(e,t){return t===a?[].concat(Object(h.a)(e),[I.empty()]):e})),a,this.leftOversTurnNumber)}},{key:"setBingo",value:function(e){var t=new I(this.getCurrentTurn().words,e);return this._setTurn(this.currentPlayerIndex,this.getCurrentTurnNumber(),t)}},{key:"endGame",value:function(){return new e(this.playersTurns,this.currentPlayerIndex,this.getCurrentTurnNumber())}},{key:"isGameOver",value:function(){return null!==this.leftOversTurnNumber}},{key:"areLeftOversSubmitted",value:function(){return!(!this.isGameOver()||!this.playersTurns[this.playersTurns.length-1][this.leftOversTurnNumber]||0!==this.currentPlayerIndex)}},{key:"isMoveInGameOver",value:function(e){return this.isGameOver()&&e>=this.leftOversTurnNumber}},{key:"getReapers",value:function(){for(var e=[],t=0;t<this.playersTurns.length;t++)this.playersTurns[t][this.leftOversTurnNumber].isEmpty()&&e.push(t);return e}},{key:"getSumOfLeftovers",value:function(){for(var e=0,t=0;t<this.playersTurns.length;t++)e+=Math.abs(this.playersTurns[t][this.leftOversTurnNumber].score);return e}},{key:"distributeLeftOversToReapers",value:function(e,t){var a=this,n=this;return e.forEach((function(e){var r=new I([{value:"__reaped_leftovers__",modifiers:[],score:t}],!1);n=n._setTurn(e,a.leftOversTurnNumber,r)})),n}},{key:"togglePlaced",value:function(e,t){var a,n=this,r=Object(L.a)(this.playersTurns.entries());try{for(r.s();!(a=r.n()).done;){var l,o=Object(x.a)(a.value,2),s=o[0],i=o[1],c=Object(L.a)(i.entries());try{var u,m=function(){var a=Object(x.a)(l.value,2),r=a[0],o=a[1],i=o.words.indexOf(e);if(i>=0){var c=new I(o.words.map((function(e,a){if(a===i){var n=e.modifiers.map((function(e,a){return t===a?v(e,"placed"):e}));return Object(P.a)(Object(P.a)({},e),{},{modifiers:n})}return e})),o.bingo);return{v:n._setTurn(s,r,c)}}};for(c.s();!(l=c.n()).done;)if(u=m())return u.v}catch(d){c.e(d)}finally{c.f()}}}catch(d){r.e(d)}finally{r.f()}return this}},{key:"updateModifiers",value:function(e,t){var a,n=this,r=Object(L.a)(this.playersTurns.entries());try{for(r.s();!(a=r.n()).done;){var l,o=Object(x.a)(a.value,2),s=o[0],i=o[1],c=Object(L.a)(i.entries());try{var u,m=function(){var a=Object(x.a)(l.value,2),r=a[0],o=a[1],i=o.words.indexOf(e);if(i>=0){var c=new I(o.words.map((function(e,a){return a===i?Object(P.a)(Object(P.a)({},e),{},{modifiers:t}):e})),o.bingo);return{v:n._setTurn(s,r,c)}}};for(c.s();!(l=c.n()).done;)if(u=m())return u.v}catch(d){c.e(d)}finally{c.f()}}}catch(d){r.e(d)}finally{r.f()}return this}},{key:"getLuckFactors",value:function(e){return this.playersTurns.map((function(t,a){var n,r=0,l=0,o=Object(L.a)(t);try{for(o.s();!(n=o.n()).done;){var s,i=n.value,c=Object(L.a)(i.words);try{for(c.s();!(s=c.n()).done;){var u=s.value;"__reaped_leftovers__"!==u.value&&(l+=y(u.value,u.modifiers,e),r+=u.modifiers.filter((function(e){return e.includes("placed")})).length)}}catch(m){c.e(m)}finally{c.f()}}}catch(m){o.e(m)}finally{o.f()}return{placed:r,score:l}}))}},{key:"getWinners",value:function(e){var t=this,a=this.playersTurns.map((function(a,n){return t.getTotalScore(n,e)}));return function(e,t){for(var a=[],n=0;n<e.length;n++)e[n]===t&&a.push(n);return a}(a,Math.max.apply(Math,Object(h.a)(a)))}},{key:"_setTurn",value:function(t,a,n){var r=this.playersTurns[t].slice();return r[a]=n,new e(this.playersTurns.map((function(e,a){return a===t?r:e})),this.currentPlayerIndex,this.leftOversTurnNumber)}},{key:"getLastPlayer",value:function(){return this.playersTurns[(this.playersTurns.length+this.currentPlayerIndex-1)%this.playersTurns.length]}},{key:"getCurrentPlayer",value:function(){return this.playersTurns[this.currentPlayerIndex]}},{key:"getLastTurn",value:function(){return this.getLastPlayer().slice(-1)[0]}},{key:"getCurrentTurn",value:function(){return this.getCurrentPlayer().slice(-1)[0]}},{key:"getCurrentTurnNumber",value:function(){return this.playersTurns[0].length-1}},{key:"getCurrentPlayerIndex",value:function(){return this.currentPlayerIndex}},{key:"getLastWord",value:function(){var e=this.getCurrentTurn();return e.isEmpty()?this.getLastTurn().words.slice(-1)[0]:e.words.slice(-1)[0]}},{key:"getRunningTotals",value:function(e){for(var t=this.playersTurns[e],a=[],n=0,r=0;r<t.length;r++)n+=t[r].score,a.push(n);return a}},{key:"getTotalScore",value:function(e,t){var a=this.getRunningTotals(e);return void 0!==t?a[t]:0===a.length?0:a[a.length-1]}}],[{key:"createNewGame",value:function(t){return new e(f([[I.empty()]],t,[]),0,null)}},{key:"fromPlain",value:function(t){return new e(t.playersTurns.map((function(e){return e.map((function(e){return I.fromPlain(e)}))})),t.currentPlayerIndex,t.leftOversTurnNumber)}}]),e}();a(55);var M=l.a.forwardRef((function(e,t){var a=e.modifier,n=e.letter,r=e.score,o=e.onTouchStart,s=e.onTouchMove,i=e.onTouchEnd,c=e.onClick,u=a.join(" ");return l.a.createElement("span",{ref:t,className:"scrabble-letter ".concat(u),role:"button",onTouchStart:o,onTouchMove:s,onTouchEnd:i,onClick:c,onKeyDown:c},0!==a.length?l.a.createElement("span",{className:"tile-modifier"}):null,l.a.createElement("span",{className:"letter"},n.toUpperCase()),l.a.createElement("span",{className:"score"},r))})),R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).tileEls=[],e.dragStartIndex=null,e.dragStartInitialPlaced=null,e.dragLastTouchIndex=null,e.initialModifiers=null,e.handleClickTile=function(t){var a=e.props,n=a.game,r=a.word,l=a.language;(0,a.onSetGame)(n.togglePlaced(r,t,l),!1)},e.setTileRef=function(t,a){e.tileEls[a]=t},e.findTileUnderTouch=function(t){return e.tileEls.findIndex((function(e){var a=e.getBoundingClientRect();return a.x<=t.clientX&&a.y<=t.clientY&&a.x+a.width>=t.clientX&&a.y+a.height>=t.clientY}))},e.handleTouchStart=function(t){var a=e.findTileUnderTouch(t.touches[0]);e.dragStartIndex=a,e.dragLastTouchIndex=a,e.initialModifiers=e.props.word.modifiers},e.handleTouchMove=function(t){var a=e.findTileUnderTouch(t.touches[0]);if(e.dragLastTouchIndex!==a){e.dragLastTouchIndex=a;var n=!e.initialModifiers[e.dragStartIndex].includes("placed"),r=e.initialModifiers.map((function(t,r){if(-1!==a&&r>=Math.min(e.dragStartIndex,a)&&r<=Math.max(e.dragStartIndex,a)){if(n&&!t.includes("placed"))return[].concat(Object(h.a)(t),["placed"]);if(!n&&t.includes("placed"))return t.filter((function(e){return"placed"!==e}))}return t})),l=e.props,o=l.game,s=l.word,i=l.language;(0,l.onSetGame)(o.updateModifiers(s,r,i),!1)}},e.handleTouchEnd=function(){e.dragStartIndex=null,e.dragStartInitialPlaced=null,e.dragLastTouchIndex=null,e.initialModifiers=null},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.word,n=t.language;if("__reaped_leftovers__"===a.value)return l.a.createElement("span",{className:"reaper"},"NO LEFTOVERS");var r=a.value.split("").map((function(t,r){return l.a.createElement(M,{ref:function(t){return e.setTileRef(t,r)},key:r,letter:t,modifier:a.modifiers[r],score:b(t,[[]],n),onTouchStart:e.handleTouchStart,onTouchMove:e.handleTouchMove,onTouchEnd:e.handleTouchEnd,onClick:function(t){t.stopPropagation(),e.handleClickTile(r)}})}));return l.a.createElement("div",null,r)}}]),a}(l.a.Component),D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"renderPassed",value:function(){var e=this.props,t=e.game,a=e.move;return l.a.createElement("tr",null,l.a.createElement("td",null,t.isMoveInGameOver(a)?"NO LEFTOVERS":"PASS"))}},{key:"renderNormal",value:function(){var e=this.props,t=e.turn,a=e.language,n=e.game,r=e.onSetGame,o=t.words.map((function(e,o){return l.a.createElement("tr",{key:"row-word-".concat(o),className:"word-row"},l.a.createElement("td",{className:"word-cell"},l.a.createElement(R,{word:e,language:a,game:n,onSetGame:r})),0===o?l.a.createElement("td",{rowSpan:"".concat(t.bingo?t.words.length+1:t.words.length),className:"score-cell"},l.a.createElement("span",{className:"score-box"},t.score)):null)}));return t.bingo&&o.push(l.a.createElement("tr",{key:"bingo"},l.a.createElement("td",{colSpan:"2"},"BINGO!"))),o}},{key:"render",value:function(){var e=this.props,t=e.turn,a=e.game;return l.a.createElement("table",{className:"score-grid-cell"},l.a.createElement("tbody",null,t.isPassed(a)?this.renderPassed():this.renderNormal()))}}]),a}(l.a.Component);a(31);var U=function(e){var t=e.playerNames,a=e.game,n=e.language,r=a.isGameOver()?a.leftOversTurnNumber+1:a.getCurrentTurnNumber()+1;return l.a.createElement("table",{className:"table table-bordered score-grid-table",align:"center"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"thead-rows"},l.a.createElement("th",{className:"move-header"},"Move"),t.map((function(e,t){return l.a.createElement("th",{key:t,className:"player-header"},e)})))),l.a.createElement("tbody",{className:"tbody-rows"},Object(h.a)(Array(r)).map((function(e,t){return l.a.createElement("tr",{className:"turn-row",key:t},l.a.createElement("th",{className:"move-number"},t+1),a.playersTurns.map((function(e,r){return l.a.createElement("td",{key:r,className:(o=e[t],s=a.getCurrentTurn(),o===s?"player-turn active":"player-turn")},e[t]?l.a.createElement(D,{turn:e[t],move:t,language:n,game:a}):null);var o,s})))})),l.a.createElement("tr",{className:"total-score"},l.a.createElement("th",{className:"move"},"TOTAL"),t.map((function(e,t){return l.a.createElement("td",{key:t},a.getTotalScore(t))})))))};var _=function(e){var t=e.isMobile,a=e.game,n=e.playerNames;return l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("span",{className:"call-player-to-action"},function(){var e=n[a.currentPlayerIndex];return{"mobile-ingame":"Submit a word or pass","mobile-gameover":"Submit your leftovers","desktop-ingame":"".concat(e,", submit a word or pass"),"desktop-gameover":"".concat(e,", submit your leftovers")}["".concat(t?"mobile":"desktop","-").concat(a.isGameOver()?"gameover":"ingame")]}()))},A=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"moveRowText",value:function(e){return this.props.game.isMoveInGameOver(e)?"Leftovers Accounting":"Move ".concat(e+1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.playerNames,n=t.game,r=t.onSetGame,o=t.language,s=Object(h.a)(Array(a.length)).map((function(e,t){return n.getRunningTotals(t)})),i=n.isGameOver()?n.leftOversTurnNumber+1:n.getCurrentTurnNumber()+1;return l.a.createElement("table",{className:"table table-bordered score-grid-table"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"thead-rows"},l.a.createElement("th",{className:"playerNames",scope:"col"},"Names",l.a.createElement("br",null),"(Total)"),l.a.createElement("th",{className:"playerTurn",scope:"col"},"Player Turn"))),l.a.createElement("tbody",{key:"tbody",className:"tbody-rows"},Object(h.a)(Array(i)).map((function(t,i){return[l.a.createElement("tr",{key:"moverow".concat(i),className:"move-row"},l.a.createElement("td",{colSpan:"2"},e.moveRowText(i))),n.playersTurns.map((function(e,t){return e[i]?l.a.createElement("tr",{key:"move".concat(i,"_player").concat(t),className:"player-move-row"},l.a.createElement("td",{className:"text-center"},a[t],l.a.createElement("br",null),(c=e[i],n.areLeftOversSubmitted()||c.isComplete(n)?s[t][i]:null)),l.a.createElement("td",{className:"player-turn"},function(e,t){return e===n.getCurrentPlayer()&&e[t].isEmpty()&&!e[t].isPassed(n)&&!e[t].bingo}(e,i)?l.a.createElement("table",{className:"score-grid-cell"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(_,{game:n,playerNames:a,isMobile:!0}))))):l.a.createElement(D,{turn:e[i],move:i,language:o,game:n,onSetGame:r}))):null;var c}))]}))))}}]),a}(l.a.Component),B=a(46),F=a(45),z=(a(56),a(57),["children","tooltip","hideArrow"]),V=function(e){var t=e.children,a=e.tooltip,n=e.hideArrow,r=Object(B.a)(e,z);return l.a.createElement(F.a,Object.assign({},r,{tooltip:function(e){var t=e.arrowRef,r=e.tooltipRef,o=e.getArrowProps,s=e.getTooltipProps,i=e.placement;return l.a.createElement("div",s({ref:r,className:"tooltip-container"}),!n&&l.a.createElement("div",o({ref:t,className:"tooltip-arrow","data-placement":i})),a)}}),(function(e){var a=e.getTriggerProps,n=e.triggerRef;return l.a.createElement("span",a({ref:n,className:"trigger"}),t)}))},H=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"tileText",value:function(){switch(this.props.modifier){case"double-letter":return"Double letter score";case"double-word":return"Double word score";case"triple-letter":return"Triple letter score";case"triple-word":return"Triple word score";case"blank":return"Blank tile";default:return null}}},{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.modifier;return l.a.createElement("span",{role:"button",onClick:function(e){return t(a,e)},onKeyDown:function(e){return t(a,e)},onTouchEnd:function(e){return t(a,e)},className:"modifier ".concat(a)},this.tileText())}}]),a}(l.a.Component),J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(c.a)(n)),n.handleVisibilityChange=n.handleVisibilityChange.bind(Object(c.a)(n)),n.state={modifiers:[],tooltipShown:!1},n}return Object(i.a)(a,[{key:"handleClick",value:function(e,t){var a=this.state.modifiers,n=this.props.onChange,r=v(a,e);this.setState({modifiers:r,tooltipShown:!1}),n(r),t.preventDefault(),t.stopPropagation()}},{key:"handleVisibilityChange",value:function(e){this.setState({tooltipShown:e})}},{key:"render",value:function(){var e=this.state.tooltipShown,t=this.props.children;return l.a.createElement(V,{onVisibilityChange:this.handleVisibilityChange,tooltipShown:e,placement:"bottom",trigger:"click",portalContainer:document.getElementsByClassName("scrabble-input-box")[0],tooltip:l.a.createElement("div",null,l.a.createElement("div",{className:"modifier-buttons"},l.a.createElement(H,{modifier:"double-letter",onClick:this.handleClick}),l.a.createElement(H,{modifier:"double-word",onClick:this.handleClick}),l.a.createElement(H,{modifier:"triple-letter",onClick:this.handleClick}),l.a.createElement(H,{modifier:"triple-word",onClick:this.handleClick}),l.a.createElement(H,{modifier:"blank",onClick:this.handleClick})),l.a.createElement("span",{className:"star-hint"},"\u2191 Press on the star"))},t)}}]),a}(l.a.Component),Y=(a(78),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).textHiddenInput=l.a.createRef(),n.focus=n.focus.bind(Object(c.a)(n)),n.handleHiddenInputChange=n.handleHiddenInputChange.bind(Object(c.a)(n)),n.handleTileClick=n.handleTileClick.bind(Object(c.a)(n)),n.state={inFocus:!1},n}return Object(i.a)(a,[{key:"handleHiddenInputChange",value:function(e){var t=this.props,a=t.language,n=t.word,r=t.onChange,l=e.target.value.substring(0,15).split("").map((function(e){return function(e,t){return e.toLowerCase()in p[t].scores}(e,a)?e:""})),o=f(n.modifiers,l.length,[]);r({value:l.join(""),modifiers:o})}},{key:"handleModifierChange",value:function(e,t){var a=this.props,n=a.word,r=a.onChange,l=n.modifiers.slice();l[e]=t,r({value:n.value,modifiers:l}),t.join()}},{key:"handleTileClick",value:function(){this.focus()}},{key:"focus",value:function(){this.textHiddenInput.current.focus()}},{key:"render",value:function(){var e=this,t=this.props,a=t.language,n=t.word,r=this.state.inFocus;return l.a.createElement("div",{role:"textbox",onClick:this.focus,onKeyDown:this.focus,className:"scrabble-input-box".concat(n.value.length>8?" large":"")},l.a.createElement("input",{ref:this.textHiddenInput,onChange:this.handleHiddenInputChange,onKeyDown:function(e){return function(e){37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode||e.preventDefault()}(e)},value:n.value,className:"hidden-input",onBlur:function(){return e.setState({inFocus:!1})},onFocus:function(){return e.setState({inFocus:!0})},type:"text",maxLength:"15",autoComplete:"off",autoCapitalize:"off",spellCheck:"false",autoCorrect:"off"}),l.a.createElement("div",{className:r?"scrabble-tiles blinker":"scrabble-tiles"},n.value.split("").map((function(t,r){return l.a.createElement(J,{onChange:function(t){return e.handleModifierChange(r,t)},key:r},l.a.createElement(M,{onClick:e.handleTileClick,letter:t,score:b(t,[[]],a),modifier:n.modifiers[r]}))}))))}}]),a}(l.a.Component)),K={value:"",modifiers:[],score:0},q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).input=l.a.createRef(),e.form=l.a.createRef(),e.state={currentWord:K},e._scrollToTop=function(){e.props.isMobile&&k()},e.handleChange=function(t){var a=e.props.language,n=Object(P.a)(Object(P.a)({},t),{},{score:b(t.value,t.modifiers,a)});e.setState({currentWord:n})},e.handleUndo=function(){(0,e.props.onUndo)(),e.reloadLastWord()},e.handleAddWord=function(){var t=e.state.currentWord,a=e.props.game;e.onSetGame(a.addWord(t)),E(e.state.currentWord)},e.handleEndTurn=function(t){var a=e.state.currentWord,n=e.props.game;0!==a.value.length&&(n=n.addWord(a)),e.onSetGame(n.endTurn());0!==a.value.length&&E(e.state.currentWord)},e.handleBingo=function(){var t=e.props,a=t.game;(0,t.onSetGame)(a.setBingo(!a.getCurrentTurn().bingo)),e.input.current.focus()},e.handleEndGame=function(){var t=e.props,a=t.game;(0,t.onSetGame)(a.endGame()),N(a)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.game;this.input.current&&this.input.current.focus(),0===e.getCurrentTurnNumber()&&this._scrollToTop()}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return{rect:this.getBoundingClientRect()}}},{key:"componentDidUpdate",value:function(e,t,a){this.adjustScrollPosition(a.rect)}},{key:"getBoundingClientRect",value:function(){return this.form.current.getBoundingClientRect()}},{key:"adjustScrollPosition",value:function(e){var t=this.getBoundingClientRect();window.scrollBy(0,t.top-e.top)}},{key:"onSetGame",value:function(e){var t=this.props.onSetGame;t(e),this.resetCurrentWord()}},{key:"resetCurrentWord",value:function(){this.setState({currentWord:K}),this.input.current&&this.input.current.focus()}},{key:"reloadLastWord",value:function(){var e=this.props.game;this.setState({currentWord:e.getLastWord()||K}),this.input.current&&this.input.current.focus()}},{key:"render",value:function(){var e=this.state.currentWord,t=this.props,a=t.game,n=t.language,r=t.undoDisabled,o=a.getCurrentTurn().isEmpty()&&""===e.value,s=o?"PASS":"END TURN",i=0!==a.currentPlayerIndex||""!==e.value||a.getCurrentTurn().score>0||1===a.playersTurns[a.getCurrentPlayerIndex()].length,c=![].concat(Object(h.a)(a.getCurrentTurn().words),[e]).some((function(e){return e.value.length>=7})),u=e.modifiers.some((function(e){return 0!==e.length})),m=0===a.getCurrentTurnNumber()&&0===a.getCurrentPlayerIndex()&&!u&&""!==e.value,d=0===a.getCurrentTurnNumber()&&0===a.getCurrentPlayerIndex(),p=!u&&!o&&d,f={ref:this.input,onChange:this.handleChange,word:e,language:n};return l.a.createElement("form",{ref:this.form,className:d?"first-turn":null,onSubmit:function(e){return e.preventDefault()}},l.a.createElement(Y,f),l.a.createElement("div",{className:"instruction-message ".concat(m?"":"hide")},"\u2191 Press on a letter"),l.a.createElement("div",{className:"buttons"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleEndTurn,type:"submit",className:"btn",disabled:p},s))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleAddWord,type:"button",className:"btn middle-scroll-anchor",disabled:""===e.value||d},"+ ADD A WORD")),l.a.createElement("div",{className:"col"},l.a.createElement("input",{onChange:this.handleBingo,type:"checkbox",id:"bingoToggle",checked:a.getCurrentTurn().bingo,disabled:c}),l.a.createElement("label",{className:"btn bingo ".concat(c?"disabled":""),htmlFor:"bingoToggle"},"BINGO"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleUndo,type:"button",className:"btn",disabled:r},"UNDO")),l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleEndGame,type:"button",className:"btn",disabled:i},"END GAME")))))}}]),a}(l.a.Component),X={value:"",modifiers:[],score:0},$=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(c.a)(n)),n.handleUndo=n.handleUndo.bind(Object(c.a)(n)),n.handleLeftOvers=n.handleLeftOvers.bind(Object(c.a)(n)),n.handleNewGame=n.handleNewGame.bind(Object(c.a)(n)),n.input=l.a.createRef(),n.state={currentWord:X},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.input.current&&this.input.current.focus()}},{key:"resetCurrentWord",value:function(){this.setState({currentWord:X}),this.input.current&&this.input.current.focus()}},{key:"handleUndo",value:function(){(0,this.props.onUndo)(),this.resetCurrentWord()}},{key:"handleChange",value:function(e){var t=this.props.language,a=Object(P.a)(Object(P.a)({},e),{},{score:-b(e.value,e.modifiers,t)});this.setState({currentWord:a})}},{key:"handleNewGame",value:function(){(0,this.props.onNewGame)({reset:!0})}},{key:"handleLeftOvers",value:function(e){var t=this.state.currentWord,a=this.props.onSetGame,n=this.props.game;e.preventDefault(),0!==t.value.length&&(n=n.addWord(t)),0===(n=n.endTurn()).currentPlayerIndex&&(n=n.distributeLeftOversToReapers(n.getReapers(),n.getSumOfLeftovers())),a(n),this.resetCurrentWord();0!==t.value.length&&t.value}},{key:"render",value:function(){var e=this.state.currentWord,t=this.props,a=t.game,n=t.language,r=t.undoDisabled,o=e.value.length>0?"SUBMIT LEFTOVERS":"SUBMIT NO LEFTOVERS";return l.a.createElement("div",null,a.areLeftOversSubmitted()?l.a.createElement("div",{className:"buttons"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleNewGame,type:"button",className:"btn"},"NEW GAME"))),l.a.createElement("div",{className:"rate-me"},l.a.createElement("div",{className:"row apple"},l.a.createElement("div",{className:"col"},l.a.createElement("a",{className:"btn app-store-rating",href:"https://apps.apple.com/us/app/scrabble-score-calculator/id1497216063",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("span",{role:"img","aria-label":"Star"},"\u2b50")," ","RATE US ON THE APP STORE"," ",l.a.createElement("span",{role:"img","aria-label":"Star"},"\u2b50")))),l.a.createElement("div",{className:"row playmarket"},l.a.createElement("div",{className:"col"},l.a.createElement("a",{className:"btn android-rating",href:"https://play.google.com/store/apps/details?id=com.saintmarina.scrabblescore",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("span",{role:"img","aria-label":"Star"},"\u2b50")," ","RATE US ON PLAY STORE"," ",l.a.createElement("span",{role:"img","aria-label":"Star"},"\u2b50"))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleUndo,type:"button",className:"btn",disabled:r},"UNDO")))):l.a.createElement("form",{autoComplete:"off"},l.a.createElement(Y,{ref:this.input,onChange:this.handleChange,word:e,language:n}),l.a.createElement("div",{className:"buttons"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleLeftOvers,type:"submit",className:"btn"},o))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{onClick:this.handleUndo,type:"button",className:"btn",disabled:r},"UNDO"))))))}}]),a}(l.a.Component),Q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).handleUndo=n.handleUndo.bind(Object(c.a)(n)),n.handleSetGame=n.handleSetGame.bind(Object(c.a)(n)),n.renderWinner=n.renderWinner.bind(Object(c.a)(n));var r=n.props.playerNames,l=O("gameState");return n.state=l?{game:W.fromPlain(l.game),games:l.games.map(W.fromPlain)}:{game:W.createNewGame(r.length),games:[]},n}return Object(i.a)(a,[{key:"handleSetGame",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.state,n=a.game,r=a.games,l=this.props.playerNames,o={game:e,games:t?[].concat(Object(h.a)(r.slice()),[n]):r};this.setState(o),w("gameState",Object(P.a)({playerNames:l},o))}},{key:"handleUndo",value:function(){var e=this.state.games,t=this.props.playerNames,a=this.undoShouldIgnoreLastGame(),n=e.slice(0,a?-2:-1),r={game:e[e.length-(a?2:1)],games:n};this.setState(r),w("gameState",Object(P.a)({playerNames:t},r))}},{key:"undoShouldIgnoreLastGame",value:function(){var e=this.state,t=e.game,a=e.games,n=a[a.length-1];if(!n)return!1;var r=n.getCurrentPlayerIndex(),l=n.playersTurns[r].slice(-1)[0],o=t.playersTurns[r].slice(-1)[0];return!!l.words.length&&JSON.stringify(l)===JSON.stringify(o)}},{key:"renderWinner",value:function(){var e=this.state.game,t=this.props.playerNames,a=e.leftOversTurnNumber-1,n=e.getWinners();if(n.length>1){var r=e.getWinners(a);return r.map((function(n){return r.length>1?"".concat(t[n],": ").concat(e.getTotalScore(n,a)," points"):"".concat(t[n]," won with ").concat(e.getTotalScore(n,a)," points!")})).join(", ")}return"".concat(t[n[0]]," won with ").concat(e.getTotalScore(n[0])," points!")}},{key:"render",value:function(){var e=this.state,t=e.game,a=e.games,n=this.props,r=n.playerNames,o=n.language,s=n.isMobile,i=n.onNewGame,c={onSetGame:this.handleSetGame,onUndo:this.handleUndo,undoDisabled:0===a.length,onNewGame:i,isMobile:s,game:t,language:o};return l.a.createElement("div",{className:"score-keeper"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{id:"small-logo",onClick:i},l.a.createElement("img",{src:"logo.png",alt:"Scrabble score logo"})),l.a.createElement("h1",{className:"title"},"Score Sheet"),s?l.a.createElement(A,{playerNames:r,game:t,language:o,onSetGame:this.handleSetGame}):l.a.createElement(U,{playerNames:r,game:t,language:o}),t.areLeftOversSubmitted()?l.a.createElement("div",{className:"winner"},l.a.createElement("h1",null,this.renderWinner())):function(){if(!s)return l.a.createElement(_,{game:t,playerNames:r,isMobile:s})}(),t.isGameOver()?l.a.createElement($,c):l.a.createElement(q,c),this.renderLuckOrSkill()))}},{key:"renderLuckOrSkill",value:function(){var e=this,t=this.state.game,a=t.getLuckFactors(this.props.language);return l.a.createElement("div",{style:{paddingTop:16}},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("tbody",{className:"tbody-rows"},l.a.createElement("tr",{className:"move-row"},l.a.createElement("td",null),l.a.createElement("td",null,"Tile Count"),l.a.createElement("td",null,"Value"),l.a.createElement("td",null,"Multiple")),a.map((function(a,n){var r=t.leftOversTurnNumber?t.leftOversTurnNumber-1:t.playersTurns[n].length-1;return console.log(t.getTotalScore(n,r),a.score),l.a.createElement("tr",{key:n,className:"move-row"},l.a.createElement("td",null,e.props.playerNames[n]),l.a.createElement("td",null,a.placed),l.a.createElement("td",null,a.score),l.a.createElement("td",null,a.score?Math.round(t.getTotalScore(n,r)/a.score*100)/100:"-"))})))))}}]),a}(l.a.Component),Z=(a(79),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleGameStart=n.handleGameStart.bind(Object(c.a)(n)),n.handleWindowSizeChange=n.handleWindowSizeChange.bind(Object(c.a)(n)),n.handlePopState=n.handlePopState.bind(Object(c.a)(n)),n.handleResetGame=n.handleResetGame.bind(Object(c.a)(n)),n.state={resumeState:null,playerNames:[],language:"en",width:10},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.playerNames;window.history.pushState({playerNames:e},null),window.addEventListener("popstate",this.handlePopState),d.a.initialize("UA-144533310-1"),d.a.pageview(window.location.pathname+window.location.search),this.handleWindowSizeChange();var t=O("gameState");this.setState({resumeState:t})}},{key:"UNSAFE_componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowSizeChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowSizeChange),window.removeEventListener("popstate",this.handlePopState)}},{key:"handlePopState",value:function(e){var t=e.state;this.setState({playerNames:t.playerNames})}},{key:"handleWindowSizeChange",value:function(){this.setState({width:window.innerWidth})}},{key:"handleGameStart",value:function(e,t){e.length,window.history.pushState({playerNames:e},null),this.setState({playerNames:e,language:t})}},{key:"handleResetGame",value:function(e){e.reset&&T("gameState");var t=O("gameState");this.setState({resumeState:t}),this.setState({playerNames:[]})}},{key:"renderGame",value:function(e){var t=this,a=this.state,n=a.resumeState,r=a.playerNames,o=a.language;if(n){return l.a.createElement(G,{onResume:function(e){e?t.setState({playerNames:n.playerNames}):T("gameState"),t.setState({resumeState:null})}})}return 0===r.length?l.a.createElement(j,{onGameStart:this.handleGameStart}):l.a.createElement(Q,{onNewGame:this.handleResetGame,playerNames:r,language:o,isMobile:e})}},{key:"render",value:function(){var e=this.state.width<=815;return l.a.createElement("div",{className:"main mb-5 ".concat(e?"mobile":"desktop")},this.renderGame(e))}}]),a}(l.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=document.getElementsByClassName("content")[0];ee.hasChildNodes()?Object(o.hydrate)(l.a.createElement(Z,null),ee):Object(o.render)(l.a.createElement(Z,null),ee),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.b0291625.chunk.js.map